<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EnergyQuota</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <style>
        .btn-register {
        background-color: white;
        color: rgb(18, 56, 69);
        padding: 10px;
        border-radius: 6px;
        border: 2px solid #113946;
      }
      .btn-register:hover{
        background-color: #113946;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="rounded mt-2 mb-2" style="display: flex; align-items: center; justify-content: space-between; background-color: #c7e9b0; color: #113946; padding: 10px;">
        <div>
            <h4 style="font-weight: bold;">
              <span style="font-size:25px; margin-right: 10px;">&#128075;</span>
              Welcome!
            </h4>
            <h4><%= user.full_name %></h4>
            <p>Meter number: <%= user.meter_number %></p>
        </div>
        <div>
         <a href="/users/logout" class="btn btn-danger">logout</a>
        </div>
     </div>
      <div>
        <div>
          <div class="text-center">
            <h3>Register tenant</h3>
          </div>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="/dashboard" style="text-decoration: none; color: steelblue;">Tenants</a>
              </li>
            </ol>
          </nav>
          <div class="row justify-content-center mt-2">
            <div class="col-lg-6">
                <form action="/dashboard/addtenant" method="post">
                  <% if(message[0]){ %>
                    <div class="alert alert-info alert-dismissible fade show" role="alert">
                       <%= message %>
                      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                  <% } %>
                <div class="mb-3">
                    <label for="name" class="form-label">full name</label>
                    <input type="text" name="full_name" class="form-control" id="full_name" placeholder="Enter full name" title="please enter first name and last name" required>
                  </div>
                <div class="mb-3">
                    <label for="phone_number" class="form-label">Phone number</label>
                    <input type="text" name="phone_number" class="form-control" id="phone_number" pattern="\+255\d{9}" title="Enter a valid phone number starting with +255 and followed by 9 digits" placeholder="+255XXXXXXXXX" required>
                  </div>
                  <div class="mb-3">
                    <label for="house_number" class="form-label">House number</label>
                    <input type="number" name="house_number" class="form-control" id="house_number" placeholder="Enter house number" required>
                  </div>
                  <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <div style="border: 1px solid rgb(173, 171, 171);" class="d-flex rounded justify-content-center align-items-center">
                      <input style="border: none;"  type="password" name="password" class="form-control" id="password" placeholder="Enter password" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$" title="Password must be at least 8 characters long and include at least one digit, one lowercase letter, and one uppercase letter" required>
                      <img style="width: 30px; cursor: pointer; padding: 5px;" id="toggle-btn" onclick="togglePassword()" src="/images/eye-close.png" alt="Eye icon">
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="confirm-password" class="form-label">Confirm Password</label>
                    <div style="border: 1px solid rgb(173, 171, 171);" class="d-flex rounded justify-content-center align-items-center">
                      <input style="border: none;" type="password" name="confirm_password" class="form-control" id="confirm_password" placeholder="Re-enter password" required>
                      <img style="width: 30px; cursor: pointer; padding: 5px;" id="toggle-btn-confirm" onclick="togglePasswordConfirm()" src="/images/eye-close.png" alt="Eye icon">
                    </div>
                  </div>
                      <button class="btn btn-register" type="submit">Register Tenant</button>
                </form>
            </div>

          </div>
        </div>
      </div>
    </div>
    <script>
            function togglePassword() {
        var passwordInput = document.getElementById("password");
        var type = passwordInput.type;
        passwordInput.type = type === "password" ? "text" : "password";
        var toggleBtn = document.getElementById("toggle-btn");
        toggleBtn.src = type === "password" ? "/images/eye-open.png" : "/images/eye-close.png";
    }

    function togglePasswordConfirm() {
         var passwordInput = document.getElementById("confirm_password");
        var type = passwordInput.type;
        passwordInput.type = type === "password" ? "text" : "password";
        var toggleBtn = document.getElementById("toggle-btn-confirm");
        toggleBtn.src = type === "password" ? "/images/eye-open.png" : "/images/eye-close.png"; 
    }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
